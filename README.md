# firebase_training004

React を利用して、ブラウザ上で動作する 動画共有アプリを作成しました  
バックエンド(データ永続化)に firestore を利用しています

## 開発環境

- Windows 11 (21H2)
- WSL2 Ubuntu20.04
- React 18.2
- firebase 9.13
- Node.js 18.12.1
- vite 3.2
- firebase-tools 11.10.0

## 利用している firebase の機能

- Authentication
  ユーザー登録に利用しています
- storage
  ユーザーからアップロードされた動画ファイルを保存しています
- firestore
  ユーザー情報及び動画情報を保持しています
- functions
  ユーザー登録やファイルアップロードなどのイベントをフックとしで、firestore への CRUD 処理を行っています

## firestore の設定

.env はリモートリポジトリに含まれていません  
設定項目のみを記載した.env.example を.env にリネームし、ご自身の firebase アプリの ID などを設定してください

## ローカルでの動作の手順

node が利用できる環境に当リポジトリをクローンします  
下記コマンドで依存パッケージをインストールします

```bash
$ npm install
```

下記コマンドで firebase のエミュレータを起動します  
エミュレータ実行に Java の実行環境が必要なので、お手元になければインストールしてください

```bash
$ npm run emulator:serve

> firebase_training004@0.0.0 emulator:serve
> firebase emulators:start

# ... 中略 ...

┌────────────────┬────────────────┬─────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Authentication │ 127.0.0.1:9099 │ http://127.0.0.1:4000/auth      │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Firestore      │ 127.0.0.1:8080 │ http://127.0.0.1:4000/firestore │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Database       │ 127.0.0.1:9000 │ http://127.0.0.1:4000/database  │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Hosting        │ 127.0.0.1:5000 │ n/a                             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Pub/Sub        │ 127.0.0.1:8085 │ n/a                             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Storage        │ 127.0.0.1:9199 │ http://127.0.0.1:4000/storage   │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Eventarc       │ 127.0.0.1:9299 │ n/a                             │
└────────────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
```

ターミナルに表示された http://127.0.0.1:5000 にアクセスすると、トップページが表示されます  
エミュレータの動作状況は、http://127.0.0.1:4000 から確認できます

## 参考資料

以下の教材をベースにソースコードを作成しました

- Firebase によるサーバレスシングルページアプリケーション :  
  https://amzn.to/3WW0QiV
